---
layout: ../layouts/Layout.astro
title: KodMQ
---

<h1 className="text-center font-black">
  KodMQ
</h1>

## Introduction

This package is a background job queue for Node.js. It is designed to be simple and easy to use.

## Installation (Recommended)

```bash
pnpm create kodmq@latest
```

## Installation (Manual)

1. Install packages

    ```bash
    pnpm install kodmq kodmq-ui
    ```

2. Create file `./jobs/index.ts`

    ```ts
    import KodMQ, { Handlers } from "kodmq"

    const handlers: Handlers = {
      sendEmail: async ({ to, text }) => {
        // Logic to send email
      },
    }

    const kodmq = new KodMQ({ handlers })

    export default kodmq
    ```

3. Create file `./jobs/launch.ts`

    ```ts
    import kodmq from "./index"
    import kodmqLauncher from "kodmq/launcher"

    await kodmqLauncher(kodmq)
    ```

4. Add these scripts to your `package.json`

    ```json5
    {
      // ...
      "scripts": {
        "workers": "ts-node ./jobs/launch.ts",
        "workers:ui": "kodmq-ui"
      },
      // ...
    }
    ```

5. Launch your workers ðŸŽ‰

    ```bash
    pnpm run workers
    pnpm run workers:ui
    ```

## Usage

Perform a job:

```ts
import kodmq from "./jobs"

const job = await kodmq.performJob("sendEmail", { to: "Andrew Kodkod", text: "Have a good day!" })
console.log(job)
```

Schedule a job:

```ts
import kodmq from "./jobs"

const runAt = new Date(Date.now() + 1000 * 60 * 60 * 24) // 1 day later
const job = await kodmq.scheduleJob(runAt, "sendEmail", { to: "Andrew Kodkod", text: "I hope you had a good day!" })
console.log(job)
```

Get list of jobs:

```ts
import kodmq, { Completed } from "./jobs"

const jobs = await kodmq.getJobs({ status: Completed })
console.log(jobs)
```
